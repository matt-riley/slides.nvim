{"id":"slides.nvim-80d","title":"Documentation and testing","description":"Write the README with installation/usage docs and create a demo slide deck for manual testing and validation.","status":"open","priority":2,"issue_type":"epic","owner":"matt@mattriley.me","created_at":"2026-02-09T19:31:27.650607167Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:31:27.650607167Z"}
{"id":"slides.nvim-80d.1","title":"Write README.md","description":"Create `README.md` at the repository root with the following sections:\n\n1. **Header** — Plugin name and one-line description\n2. **Features** — Bullet list: markdown slides separated by `---`, centered floating window, slide counter, syntax highlighting, toggle with `:Slides`\n3. **Installation** — Examples for lazy.nvim and packer.nvim:\n\n```lua\n-- lazy.nvim\n{ \"mattriley/slides.nvim\", opts = {} }\n\n-- packer.nvim\nuse { \"mattriley/slides.nvim\", config = function() require(\"slides\").setup() end }\n```\n\n4. **Usage** — Explain creating a markdown file with `---` separators, running `:Slides` to toggle\n5. **Keybindings** — Table showing: `l` = next slide, `h` = previous slide, `q` = quit, `Escape` = quit\n6. **Configuration** — Show `require(\"slides\").setup({})` with available options (border, width, height)\n7. **Requirements** — Neovim 0.8+, optional Treesitter markdown parser for syntax highlighting","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:35:08.64432476Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:35:08.64432476Z","dependencies":[{"issue_id":"slides.nvim-80d.1","depends_on_id":"slides.nvim-80d","type":"parent-child","created_at":"2026-02-09T19:35:08.645716839Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-80d.1","depends_on_id":"slides.nvim-vql","type":"blocks","created_at":"2026-02-09T19:35:08.647653731Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-80d.2","title":"Create demo.md sample slide deck","description":"Create `demo.md` at the repository root as a sample slide deck for testing. Include diverse markdown content to validate rendering.\n\n**Content should include:**\n- Slide 1: Title slide with `# slides.nvim` heading and subtitle\n- Slide 2: Bullet list of features\n- Slide 3: A fenced code block (Lua) to test syntax highlighting\n- Slide 4: Mixed content — heading, paragraph, bold/italic text\n- Slide 5: A closing slide\n\n**Example:**\n\n```markdown\n# slides.nvim\n\n*Present markdown slides in Neovim*\n\n---\n\n## Features\n\n- Write slides in **markdown**\n- Separate slides with `---`\n- Navigate with `h` and `l`\n- *Syntax highlighting* for code blocks\n\n---\n\n## Code Example\n\n```lua\nrequire(\"slides\").setup({\n  border = \"rounded\",\n  width = 0.8,\n})\n`` `\n\n---\n\n## Why slides.nvim?\n\nBecause **presentations** should be written in your editor.\n\n\u003e Keep it simple. Keep it in the terminal.\n\n---\n\n# Thank you!\n\n`:Slides` to toggle presentation mode\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:35:23.358020586Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:35:23.358020586Z","dependencies":[{"issue_id":"slides.nvim-80d.2","depends_on_id":"slides.nvim-80d","type":"parent-child","created_at":"2026-02-09T19:35:23.359686708Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-80d.2","depends_on_id":"slides.nvim-vql","type":"blocks","created_at":"2026-02-09T19:35:23.36301274Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-80d.3","title":"Manual testing and validation","description":"Perform manual testing of the plugin using `demo.md`.\n\n**Test checklist:**\n1. Open `demo.md` in Neovim with the plugin loaded\n2. Run `:Slides` — verify floating window appears centered with rounded border\n3. Verify slide 1 is displayed with content centered vertically and horizontally\n4. Verify slide counter shows `[1/5]` at the bottom\n5. Press `l` — verify slide 2 appears, counter updates to `[2/5]`\n6. Press `l` repeatedly — verify navigation stops at last slide (no crash or wrap)\n7. Press `h` — verify going back works, counter decrements\n8. Press `h` at slide 1 — verify it stays on slide 1 (no crash)\n9. Press `q` — verify floating window closes and returns to editing buffer\n10. Run `:Slides` again — verify it toggles back on\n11. Press `\u003cEscape\u003e` — verify it also exits presentation mode\n12. Test with a file that has no `---` separators — verify entire file is one slide\n13. Test syntax highlighting on the code block slide (requires TSInstall markdown)\n\nFix any issues found during testing.","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:35:39.625313932Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:35:39.625313932Z","dependencies":[{"issue_id":"slides.nvim-80d.3","depends_on_id":"slides.nvim-80d","type":"parent-child","created_at":"2026-02-09T19:35:39.627642113Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-80d.3","depends_on_id":"slides.nvim-80d.1","type":"blocks","created_at":"2026-02-09T19:35:39.630368247Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-80d.3","depends_on_id":"slides.nvim-80d.2","type":"blocks","created_at":"2026-02-09T19:35:39.632456166Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-bow","title":"Project scaffolding","description":"Set up the slides.nvim plugin directory structure and all boilerplate files following Neovim Lua plugin conventions.","status":"closed","priority":2,"issue_type":"epic","owner":"matt@mattriley.me","created_at":"2026-02-09T19:30:57.05092762Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:45:11.554790928Z","closed_at":"2026-02-09T19:45:11.554790928Z","close_reason":"Closed"}
{"id":"slides.nvim-bow.1","title":"Create lua/slides/ and plugin/ directories","description":"Create the directory structure for the plugin:\n\n```bash\nmkdir -p lua/slides plugin\n```\n\nThis creates:\n- `lua/slides/` — Lua module directory (loaded via `require(\"slides\")`)\n- `plugin/` — Auto-loaded by Neovim on startup (for user commands)","status":"closed","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:31:39.253650031Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:44:40.906221425Z","closed_at":"2026-02-09T19:44:40.906221425Z","close_reason":"Closed","dependencies":[{"issue_id":"slides.nvim-bow.1","depends_on_id":"slides.nvim-bow","type":"parent-child","created_at":"2026-02-09T19:31:39.256189073Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-bow.2","title":"Create lua/slides/init.lua stub","description":"Create `lua/slides/init.lua` with the module boilerplate and empty function stubs. This is the public API surface of the plugin.\n\n```lua\n-- lua/slides/init.lua\nlocal M = {}\n\n--- Configure the plugin with user options.\n--- @param opts? table User configuration options\nfunction M.setup(opts)\n  -- TODO: merge opts with defaults\nend\n\n--- Toggle presentation mode on/off.\nfunction M.toggle()\n  -- TODO: implement\nend\n\n--- Advance to the next slide.\nfunction M.next_slide()\n  -- TODO: implement\nend\n\n--- Go back to the previous slide.\nfunction M.prev_slide()\n  -- TODO: implement\nend\n\nreturn M\n```","status":"closed","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:31:51.235351504Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:44:46.010030083Z","closed_at":"2026-02-09T19:44:46.010030083Z","close_reason":"Closed","dependencies":[{"issue_id":"slides.nvim-bow.2","depends_on_id":"slides.nvim-bow","type":"parent-child","created_at":"2026-02-09T19:31:51.238625673Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-bow.2","depends_on_id":"slides.nvim-bow.1","type":"blocks","created_at":"2026-02-09T19:31:51.24076176Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-bow.3","title":"Create lua/slides/parser.lua stub","description":"Create `lua/slides/parser.lua` with an empty module stub.\n\n```lua\n-- lua/slides/parser.lua\nlocal M = {}\n\n--- Parse buffer lines into a list of slides, splitting on --- separators.\n--- @param lines string[] Buffer lines\n--- @return string[][] List of slides (each slide is a list of lines)\nfunction M.parse(lines)\n  -- TODO: implement\n  return {}\nend\n\nreturn M\n```","status":"closed","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:32:01.664869581Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:44:51.112789723Z","closed_at":"2026-02-09T19:44:51.112789723Z","close_reason":"Closed","dependencies":[{"issue_id":"slides.nvim-bow.3","depends_on_id":"slides.nvim-bow","type":"parent-child","created_at":"2026-02-09T19:32:01.666310076Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-bow.3","depends_on_id":"slides.nvim-bow.1","type":"blocks","created_at":"2026-02-09T19:32:01.668616122Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-bow.4","title":"Create lua/slides/state.lua stub","description":"Create `lua/slides/state.lua` with an empty module stub.\n\n```lua\n-- lua/slides/state.lua\nlocal M = {}\n\n--- Reset state to initial values.\nfunction M.reset()\n  -- TODO: implement\nend\n\nreturn M\n```","status":"closed","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:32:12.059699636Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:44:56.211305668Z","closed_at":"2026-02-09T19:44:56.211305668Z","close_reason":"Closed","dependencies":[{"issue_id":"slides.nvim-bow.4","depends_on_id":"slides.nvim-bow","type":"parent-child","created_at":"2026-02-09T19:32:12.062919966Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-bow.4","depends_on_id":"slides.nvim-bow.1","type":"blocks","created_at":"2026-02-09T19:32:12.065267492Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-bow.5","title":"Create lua/slides/renderer.lua stub","description":"Create `lua/slides/renderer.lua` with an empty module stub.\n\n```lua\n-- lua/slides/renderer.lua\nlocal M = {}\n\n--- Open the floating presentation window.\nfunction M.open()\n  -- TODO: implement\nend\n\n--- Render a slide in the floating window.\n--- @param slide_lines string[] Lines of the current slide\n--- @param current number Current slide number\n--- @param total number Total number of slides\nfunction M.render(slide_lines, current, total)\n  -- TODO: implement\nend\n\n--- Close the floating presentation window.\nfunction M.close()\n  -- TODO: implement\nend\n\nreturn M\n```","status":"closed","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:32:23.277392373Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:45:01.321553548Z","closed_at":"2026-02-09T19:45:01.321553548Z","close_reason":"Closed","dependencies":[{"issue_id":"slides.nvim-bow.5","depends_on_id":"slides.nvim-bow","type":"parent-child","created_at":"2026-02-09T19:32:23.279384715Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-bow.5","depends_on_id":"slides.nvim-bow.1","type":"blocks","created_at":"2026-02-09T19:32:23.282063341Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-bow.6","title":"Create plugin/slides.lua stub","description":"Create `plugin/slides.lua` with a placeholder comment. This file is auto-loaded by Neovim and will later register the `:Slides` command.\n\n```lua\n-- plugin/slides.lua\n-- Auto-loaded by Neovim. Registers the :Slides user command.\n-- TODO: implement after navigation module is complete\n```","status":"closed","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:32:33.484467959Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:45:06.420373021Z","closed_at":"2026-02-09T19:45:06.420373021Z","close_reason":"Closed","dependencies":[{"issue_id":"slides.nvim-bow.6","depends_on_id":"slides.nvim-bow","type":"parent-child","created_at":"2026-02-09T19:32:33.486491333Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-bow.6","depends_on_id":"slides.nvim-bow.1","type":"blocks","created_at":"2026-02-09T19:32:33.489268358Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-vql","title":"Navigation and command integration","description":"Wire up the public API (toggle, next, prev), buffer-local keymaps (h/l/q/Escape), and the :Slides user command. This brings all core modules together into a usable plugin.","status":"open","priority":2,"issue_type":"epic","owner":"matt@mattriley.me","created_at":"2026-02-09T19:31:17.50324784Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:31:17.50324784Z"}
{"id":"slides.nvim-vql.1","title":"Implement toggle function","description":"Implement the `M.toggle()` function in `lua/slides/init.lua`. This is the main entry point that starts or stops presentation mode.\n\n**Behaviour when starting (state.active == false):**\n1. Save the current buffer as `state.source_buf`\n2. Get all lines from the source buffer via `nvim_buf_get_lines`\n3. Parse lines into slides using `require(\"slides.parser\").parse(lines)`\n4. Store parsed slides in state\n5. Set `state.current = 1` and `state.active = true`\n6. Call `renderer.open()` to create the floating window\n7. Call `renderer.render()` to display the first slide\n8. Set up buffer-local keymaps on the presentation buffer (h, l, q, Escape)\n\n**Behaviour when stopping (state.active == true):**\n1. Call `renderer.close()` to close the floating window\n2. Call `state.reset()` to clear all state\n\n**Code to replace the toggle stub in `lua/slides/init.lua`:**\n\n```lua\nlocal parser = require(\"slides.parser\")\nlocal renderer = require(\"slides.renderer\")\nlocal state = require(\"slides.state\")\n\nfunction M.toggle()\n  if state.active then\n    renderer.close()\n    state.reset()\n    return\n  end\n\n  local source_buf = vim.api.nvim_get_current_buf()\n  local lines = vim.api.nvim_buf_get_lines(source_buf, 0, -1, false)\n  local slides = parser.parse(lines)\n\n  state.source_buf = source_buf\n  state.slides = slides\n  state.current = 1\n  state.active = true\n\n  renderer.open()\n  renderer.render(state.slides[state.current], state.current, #state.slides)\n\n  -- Buffer-local keymaps for navigation\n  local buf = state.buf\n  local opts = { noremap = true, silent = true, buffer = buf }\n  vim.keymap.set(\"n\", \"l\", function() M.next_slide() end, opts)\n  vim.keymap.set(\"n\", \"h\", function() M.prev_slide() end, opts)\n  vim.keymap.set(\"n\", \"q\", function() M.toggle() end, opts)\n  vim.keymap.set(\"n\", \"\u003cEscape\u003e\", function() M.toggle() end, opts)\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:34:14.834566553Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:34:14.834566553Z","dependencies":[{"issue_id":"slides.nvim-vql.1","depends_on_id":"slides.nvim-vql","type":"parent-child","created_at":"2026-02-09T19:34:14.843715308Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-vql.1","depends_on_id":"slides.nvim-w0o","type":"blocks","created_at":"2026-02-09T19:34:14.846893419Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-vql.2","title":"Implement next_slide and prev_slide functions","description":"Implement `M.next_slide()` and `M.prev_slide()` in `lua/slides/init.lua`.\n\n**Behaviour:**\n- `next_slide()`: If current \u003c total slides, increment `state.current` and re-render. Clamp at the last slide (do not wrap).\n- `prev_slide()`: If current \u003e 1, decrement `state.current` and re-render. Clamp at slide 1 (do not wrap).\n- Both should no-op if not active.\n\n**Code to replace the stubs in `lua/slides/init.lua`:**\n\n```lua\nfunction M.next_slide()\n  if not state.active then return end\n  if state.current \u003c #state.slides then\n    state.current = state.current + 1\n    renderer.render(state.slides[state.current], state.current, #state.slides)\n  end\nend\n\nfunction M.prev_slide()\n  if not state.active then return end\n  if state.current \u003e 1 then\n    state.current = state.current - 1\n    renderer.render(state.slides[state.current], state.current, #state.slides)\n  end\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:34:27.606870152Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:34:27.606870152Z","dependencies":[{"issue_id":"slides.nvim-vql.2","depends_on_id":"slides.nvim-vql","type":"parent-child","created_at":"2026-02-09T19:34:27.609676593Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-vql.2","depends_on_id":"slides.nvim-vql.1","type":"blocks","created_at":"2026-02-09T19:34:27.613671912Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-vql.3","title":"Implement setup function with user config","description":"Implement the `M.setup(opts)` function in `lua/slides/init.lua`. This allows users to override default settings.\n\n**Default configuration:**\n```lua\nlocal defaults = {\n  separator = \"^%-%-%-+$\",   -- Lua pattern for slide separator\n  border = \"rounded\",        -- Floating window border style\n  width = 0.8,               -- Window width as fraction of editor\n  height = 0.8,              -- Window height as fraction of editor\n}\n```\n\n**Code to replace the setup stub:**\n\n```lua\nM.config = {\n  separator = \"^%-%-%-+$\",\n  border = \"rounded\",\n  width = 0.8,\n  height = 0.8,\n}\n\nfunction M.setup(opts)\n  M.config = vim.tbl_deep_extend(\"force\", M.config, opts or {})\nend\n```\n\nNote: The renderer should later read from `require(\"slides\").config` for border style and dimensions. This is a minimal viable setup — future tasks can thread config through to parser/renderer.","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:34:41.19364873Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:34:41.19364873Z","dependencies":[{"issue_id":"slides.nvim-vql.3","depends_on_id":"slides.nvim-vql","type":"parent-child","created_at":"2026-02-09T19:34:41.197171863Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-vql.3","depends_on_id":"slides.nvim-vql.1","type":"blocks","created_at":"2026-02-09T19:34:41.200569202Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-vql.4","title":"Register :Slides user command in plugin/slides.lua","description":"Implement `plugin/slides.lua` — the auto-loaded entry point that registers the `:Slides` user command.\n\n**Behaviour:**\n- Register a user command `:Slides` that calls `require(\"slides\").toggle()`\n- No arguments needed\n- The command is available immediately when Neovim loads the plugin\n\n**Replace the stub in `plugin/slides.lua` with:**\n\n```lua\n-- plugin/slides.lua\nvim.api.nvim_create_user_command(\"Slides\", function()\n  require(\"slides\").toggle()\nend, {\n  desc = \"Toggle slide presentation mode\",\n})\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:34:53.373941096Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:34:53.373941096Z","dependencies":[{"issue_id":"slides.nvim-vql.4","depends_on_id":"slides.nvim-vql","type":"parent-child","created_at":"2026-02-09T19:34:53.37566456Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-vql.4","depends_on_id":"slides.nvim-vql.1","type":"blocks","created_at":"2026-02-09T19:34:53.377605822Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-w0o","title":"Core plugin modules","description":"Implement the core Lua modules: parser, state management, and renderer. These are the foundational building blocks that the navigation and command layers depend on.","status":"open","priority":2,"issue_type":"epic","owner":"matt@mattriley.me","created_at":"2026-02-09T19:31:07.576393904Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:31:07.576393904Z"}
{"id":"slides.nvim-w0o.1","title":"Implement slide parser logic","description":"Implement `lua/slides/parser.lua` — the `M.parse(lines)` function that splits a list of buffer lines into slides.\n\n**Behaviour:**\n- Split on lines matching the Lua pattern `^%-%-%-+$` (three or more dashes, nothing else)\n- Each slide is a list of lines between separators\n- Trim leading and trailing empty lines from each slide\n- If the file starts with `---`, the first slide is empty — skip it\n- If the file has no separators, the entire content is one slide\n- Always return at least one slide (even if empty)\n\n**Replace the stub in `lua/slides/parser.lua` with:**\n\n```lua\n-- lua/slides/parser.lua\nlocal M = {}\n\n--- Remove leading and trailing empty lines from a list of lines.\n--- @param lines string[]\n--- @return string[]\nlocal function trim_blank_lines(lines)\n  local start_idx = 1\n  local end_idx = #lines\n\n  while start_idx \u003c= end_idx and lines[start_idx]:match(\"^%s*$\") do\n    start_idx = start_idx + 1\n  end\n\n  while end_idx \u003e= start_idx and lines[end_idx]:match(\"^%s*$\") do\n    end_idx = end_idx - 1\n  end\n\n  local trimmed = {}\n  for i = start_idx, end_idx do\n    table.insert(trimmed, lines[i])\n  end\n  return trimmed\nend\n\n--- Parse buffer lines into slides, splitting on --- separators.\n--- @param lines string[] Buffer lines\n--- @return string[][] List of slides (each slide is a list of lines)\nfunction M.parse(lines)\n  local slides = {}\n  local current = {}\n\n  for _, line in ipairs(lines) do\n    if line:match(\"^%-%-%-+$\") then\n      local trimmed = trim_blank_lines(current)\n      if #trimmed \u003e 0 or #slides \u003e 0 then\n        table.insert(slides, trimmed)\n      end\n      current = {}\n    else\n      table.insert(current, line)\n    end\n  end\n\n  -- Add the final slide\n  local trimmed = trim_blank_lines(current)\n  if #trimmed \u003e 0 or #slides \u003e 0 then\n    table.insert(slides, trimmed)\n  end\n\n  -- Ensure at least one slide\n  if #slides == 0 then\n    table.insert(slides, {})\n  end\n\n  return slides\nend\n\nreturn M\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:32:52.283177662Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:32:52.283177662Z","dependencies":[{"issue_id":"slides.nvim-w0o.1","depends_on_id":"slides.nvim-w0o","type":"parent-child","created_at":"2026-02-09T19:32:52.286062115Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-w0o.1","depends_on_id":"slides.nvim-bow","type":"blocks","created_at":"2026-02-09T19:32:52.28842839Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-w0o.2","title":"Implement state management module","description":"Implement `lua/slides/state.lua` — a simple module-level state table that tracks presentation state.\n\n**State fields:**\n- `active` (bool) — whether presentation mode is on\n- `slides` (table) — parsed list of slides\n- `current` (number) — 1-based index of the current slide\n- `buf` (number|nil) — presentation buffer ID\n- `win` (number|nil) — presentation floating window ID\n- `source_buf` (number|nil) — the original buffer being presented\n\n**Replace the stub in `lua/slides/state.lua` with:**\n\n```lua\n-- lua/slides/state.lua\nlocal M = {\n  active = false,\n  slides = {},\n  current = 1,\n  buf = nil,\n  win = nil,\n  source_buf = nil,\n}\n\n--- Reset state to initial values.\nfunction M.reset()\n  M.active = false\n  M.slides = {}\n  M.current = 1\n  M.buf = nil\n  M.win = nil\n  M.source_buf = nil\nend\n\nreturn M\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:33:05.391426457Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:33:05.391426457Z","dependencies":[{"issue_id":"slides.nvim-w0o.2","depends_on_id":"slides.nvim-w0o","type":"parent-child","created_at":"2026-02-09T19:33:05.393563905Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-w0o.2","depends_on_id":"slides.nvim-bow","type":"blocks","created_at":"2026-02-09T19:33:05.396774868Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-w0o.3","title":"Implement renderer — open floating window","description":"Implement the `M.open()` function in `lua/slides/renderer.lua`. This creates a scratch buffer and a centered floating window for slide display.\n\n**Behaviour:**\n- Create a new scratch buffer (`nvim_create_buf(false, true)`)\n- Set buffer options: `buftype=nofile`, `bufhidden=wipe`, `swapfile=false`, `filetype=markdown`\n- Calculate window dimensions: 80% of editor width and height\n- Center the window in the editor using `col` and `row` offsets\n- Open with `nvim_open_win` using `relative=\"editor\"`, `style=\"minimal\"`, `border=\"rounded\"`\n- Store the buf and win IDs in the state module\n\n**Code for `M.open()` (add to `lua/slides/renderer.lua`):**\n\n```lua\nlocal state = require(\"slides.state\")\n\nfunction M.open()\n  local buf = vim.api.nvim_create_buf(false, true)\n\n  vim.bo[buf].buftype = \"nofile\"\n  vim.bo[buf].bufhidden = \"wipe\"\n  vim.bo[buf].swapfile = false\n  vim.bo[buf].filetype = \"markdown\"\n\n  local editor_width = vim.o.columns\n  local editor_height = vim.o.lines - vim.o.cmdheight\n\n  local win_width = math.floor(editor_width * 0.8)\n  local win_height = math.floor(editor_height * 0.8)\n\n  local col = math.floor((editor_width - win_width) / 2)\n  local row = math.floor((editor_height - win_height) / 2)\n\n  local win = vim.api.nvim_open_win(buf, true, {\n    relative = \"editor\",\n    width = win_width,\n    height = win_height,\n    col = col,\n    row = row,\n    style = \"minimal\",\n    border = \"rounded\",\n  })\n\n  vim.wo[win].wrap = true\n  vim.wo[win].linebreak = true\n\n  state.buf = buf\n  state.win = win\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:33:22.217655431Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:33:22.217655431Z","dependencies":[{"issue_id":"slides.nvim-w0o.3","depends_on_id":"slides.nvim-w0o","type":"parent-child","created_at":"2026-02-09T19:33:22.218643908Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-w0o.3","depends_on_id":"slides.nvim-bow","type":"blocks","created_at":"2026-02-09T19:33:22.220509306Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-w0o.4","title":"Implement renderer — render slide content with centering","description":"Implement the `M.render(slide_lines, current, total)` function in `lua/slides/renderer.lua`. This displays a single slide in the floating window with vertical and horizontal centering, plus a slide counter footer.\n\n**Behaviour:**\n- Temporarily set buffer to modifiable, replace all lines, then set back to nomodifiable\n- Calculate the maximum line width of the slide content\n- Horizontal centering: pad each line with leading spaces so it appears centered in the window\n- Vertical centering: prepend empty lines so the content block is vertically centered\n- Append a centered slide counter line at the bottom: `[3/10]`\n\n**Code for `M.render()` (add to `lua/slides/renderer.lua`):**\n\n```lua\nfunction M.render(slide_lines, current, total)\n  local buf = state.buf\n  local win = state.win\n\n  if not buf or not vim.api.nvim_buf_is_valid(buf) then return end\n  if not win or not vim.api.nvim_win_is_valid(win) then return end\n\n  local win_width = vim.api.nvim_win_get_width(win)\n  local win_height = vim.api.nvim_win_get_height(win)\n\n  -- Find the maximum line width for centering\n  local max_width = 0\n  for _, line in ipairs(slide_lines) do\n    if #line \u003e max_width then\n      max_width = #line\n    end\n  end\n\n  -- Horizontal centering: pad each content line\n  local h_pad = math.max(0, math.floor((win_width - max_width) / 2))\n  local padding = string.rep(\" \", h_pad)\n  local centered_lines = {}\n  for _, line in ipairs(slide_lines) do\n    table.insert(centered_lines, padding .. line)\n  end\n\n  -- Slide counter footer\n  local counter = string.format(\"[%d/%d]\", current, total)\n  local counter_pad = string.rep(\" \", math.max(0, math.floor((win_width - #counter) / 2)))\n  local counter_line = counter_pad .. counter\n\n  -- Vertical centering: total content = slide lines + 2 (blank + counter)\n  local content_height = #centered_lines + 2\n  local v_pad = math.max(0, math.floor((win_height - content_height) / 2))\n\n  -- Build final buffer content\n  local output = {}\n  for _ = 1, v_pad do\n    table.insert(output, \"\")\n  end\n  for _, line in ipairs(centered_lines) do\n    table.insert(output, line)\n  end\n  table.insert(output, \"\")\n  table.insert(output, counter_line)\n\n  -- Write to buffer\n  vim.bo[buf].modifiable = true\n  vim.api.nvim_buf_set_lines(buf, 0, -1, false, output)\n  vim.bo[buf].modifiable = false\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:33:43.12629444Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:33:43.12629444Z","dependencies":[{"issue_id":"slides.nvim-w0o.4","depends_on_id":"slides.nvim-w0o","type":"parent-child","created_at":"2026-02-09T19:33:43.128745535Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-w0o.4","depends_on_id":"slides.nvim-w0o.3","type":"blocks","created_at":"2026-02-09T19:33:43.131762832Z","created_by":"Matt Riley"}]}
{"id":"slides.nvim-w0o.5","title":"Implement renderer — close floating window","description":"Implement the `M.close()` function in `lua/slides/renderer.lua`. This closes the presentation window and cleans up.\n\n**Behaviour:**\n- Check if the window is valid and close it with `nvim_win_close`\n- Check if the buffer is valid and delete it with `nvim_buf_delete`\n- Nil out state.win and state.buf\n\n**Code for `M.close()` (add to `lua/slides/renderer.lua`):**\n\n```lua\nfunction M.close()\n  if state.win and vim.api.nvim_win_is_valid(state.win) then\n    vim.api.nvim_win_close(state.win, true)\n  end\n  if state.buf and vim.api.nvim_buf_is_valid(state.buf) then\n    vim.api.nvim_buf_delete(state.buf, { force = true })\n  end\n  state.win = nil\n  state.buf = nil\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"matt@mattriley.me","created_at":"2026-02-09T19:33:55.497627188Z","created_by":"Matt Riley","updated_at":"2026-02-09T19:33:55.497627188Z","dependencies":[{"issue_id":"slides.nvim-w0o.5","depends_on_id":"slides.nvim-w0o","type":"parent-child","created_at":"2026-02-09T19:33:55.498907536Z","created_by":"Matt Riley"},{"issue_id":"slides.nvim-w0o.5","depends_on_id":"slides.nvim-w0o.3","type":"blocks","created_at":"2026-02-09T19:33:55.500551621Z","created_by":"Matt Riley"}]}
